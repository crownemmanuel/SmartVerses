---
import { Icon } from 'astro-icon/components';
---

<section id="features" class="py-20 md:py-32 overflow-hidden">
  <div class="mx-auto max-w-7xl px-6">
    <!-- Section Header -->
    <div class="text-center mb-16 md:mb-24">
      <p class="text-sm font-semibold tracking-widest text-zinc-500 dark:text-zinc-400 uppercase mb-4">Everything you need</p>
      <h2 class="text-4xl md:text-5xl lg:text-6xl font-bold tracking-tight text-zinc-900 dark:text-white">
        Powerful features,<br />
        <span class="bg-gradient-to-r from-blue-600 via-violet-600 to-fuchsia-600 bg-clip-text text-transparent">endless possibilities</span>
      </h2>
    </div>

    <!-- AI Hero Section - Now Light -->
    <div class="relative mb-8">
      <div class="group relative overflow-hidden rounded-3xl bg-gradient-to-br from-violet-50 via-blue-50 to-fuchsia-50 dark:from-violet-950/40 dark:via-blue-950/30 dark:to-fuchsia-950/40 border border-violet-100 dark:border-violet-500/20 p-8 md:p-12 lg:p-16">
        <!-- Animated gradient orbs -->
        <div class="absolute top-0 right-0 w-96 h-96 bg-gradient-to-br from-blue-400/20 to-violet-400/20 rounded-full blur-3xl"></div>
        <div class="absolute bottom-0 left-0 w-72 h-72 bg-gradient-to-tr from-fuchsia-400/15 to-pink-400/15 rounded-full blur-3xl"></div>

        <div class="relative z-10 grid lg:grid-cols-2 gap-8 lg:gap-16 items-center">
          <div>
            <h3 class="text-3xl md:text-4xl font-bold text-zinc-900 dark:text-white mb-4">
              AI that understands your workflow
            </h3>
            <p class="text-lg text-zinc-600 dark:text-zinc-300 leading-relaxed mb-8">
              From OpenAI to Gemini to Groq — choose your AI provider. Our intelligent processing splits content perfectly,
              extracts schedules from images, detects Bible verses in speech, and automates proofreading.
              All with a natural language assistant at your fingertips.
            </p>
            <div class="flex flex-wrap gap-3">
              {['OpenAI', 'Google Gemini', 'Groq', 'AssemblyAI'].map((provider) => (
                <span class="px-3 py-1.5 rounded-lg bg-white/80 dark:bg-white/10 border border-violet-200 dark:border-violet-500/30 text-sm text-zinc-700 dark:text-white shadow-sm">
                  {provider}
                </span>
              ))}
            </div>
          </div>

          <!-- AI Features Grid -->
          <div class="grid grid-cols-2 gap-4">
            {[
              { icon: 'ph:robot-bold', label: 'Smart Processing', desc: 'Auto-split content' },
              { icon: 'ph:chat-circle-dots-bold', label: 'AI Assistant', desc: 'Natural language' },
              { icon: 'ph:image-bold', label: 'Image Extract', desc: 'Schedule from photos' },
              { icon: 'ph:sparkle-bold', label: 'Auto Proofread', desc: 'Smart corrections' },
            ].map((item) => (
              <div class="group/card p-4 rounded-2xl bg-white/70 dark:bg-white/5 border border-violet-100 dark:border-violet-500/20 hover:bg-white dark:hover:bg-white/10 hover:border-violet-200 dark:hover:border-violet-500/30 hover:shadow-lg transition-all duration-300">
                <div class="size-10 rounded-xl bg-gradient-to-br from-blue-500 to-violet-500 flex items-center justify-center mb-3 shadow-lg shadow-violet-500/25">
                  <Icon name={item.icon} class="size-5 text-white" />
                </div>
                <p class="font-medium text-zinc-900 dark:text-white text-sm">{item.label}</p>
                <p class="text-xs text-zinc-500 dark:text-zinc-400">{item.desc}</p>
              </div>
            ))}
          </div>
        </div>
      </div>
    </div>

    <!-- Bento Grid -->
    <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6">

      <!-- Live Collaboration - Wide & Interactive -->
      <div class="md:col-span-2 group relative overflow-hidden rounded-3xl bg-gradient-to-br from-emerald-50 to-teal-50 dark:from-emerald-950/40 dark:to-teal-950/30 border border-emerald-100 dark:border-emerald-500/20 p-8" id="collab-card">
        <div class="absolute top-4 right-4 flex gap-1">
          <span class="size-3 rounded-full bg-emerald-400 animate-pulse"></span>
          <span class="size-3 rounded-full bg-emerald-300 animate-pulse" style="animation-delay: 150ms"></span>
          <span class="size-3 rounded-full bg-emerald-200 animate-pulse" style="animation-delay: 300ms"></span>
        </div>
        <div class="flex flex-col md:flex-row md:items-center gap-6">
          <div class="flex-1">
            <div class="size-14 rounded-2xl bg-gradient-to-br from-emerald-500 to-teal-500 flex items-center justify-center mb-4 shadow-lg shadow-emerald-500/25">
              <Icon name="ph:users-three-bold" class="size-7 text-white" />
            </div>
            <h3 class="text-2xl font-bold text-zinc-900 dark:text-white mb-2">Real-time Collaboration</h3>
            <p class="text-zinc-600 dark:text-zinc-300 leading-relaxed transition-all duration-300" id="collab-description">
              WebSocket-powered Live Slides let your team edit from any browser. Share URLs, sync across devices,
              and see changes instantly. Perfect for remote teams and distributed workflows.
            </p>
          </div>
          <div class="flex flex-wrap items-center gap-3 md:flex-col" id="collab-tags">
            <button
              data-collab="live-slides"
              class="collab-tag px-4 py-2 rounded-full border-2 border-emerald-500 bg-emerald-500 text-white text-sm font-medium whitespace-nowrap transition-all duration-200 hover:scale-105 cursor-pointer"
            >
              Live Slides
            </button>
            <button
              data-collab="network-sync"
              class="collab-tag px-4 py-2 rounded-full border-2 border-emerald-200 bg-emerald-500/10 text-emerald-700 dark:text-emerald-300 text-sm font-medium whitespace-nowrap transition-all duration-200 hover:scale-105 cursor-pointer"
            >
              Network Sync
            </button>
            <button
              data-collab="remote-access"
              class="collab-tag px-4 py-2 rounded-full border-2 border-emerald-200 bg-emerald-500/10 text-emerald-700 dark:text-emerald-300 text-sm font-medium whitespace-nowrap transition-all duration-200 hover:scale-105 cursor-pointer"
            >
              Remote Access
            </button>
          </div>
        </div>
      </div>

      <!-- SmartVerses - Tall -->
      <div class="md:row-span-2 group relative overflow-hidden rounded-3xl bg-gradient-to-b from-amber-50 via-orange-50 to-rose-50 dark:from-amber-950/40 dark:via-orange-950/30 dark:to-rose-950/30 border border-amber-100 dark:border-amber-500/20 p-8">
        <div class="h-full flex flex-col">
          <div class="size-14 rounded-2xl bg-gradient-to-br from-amber-500 to-orange-500 flex items-center justify-center mb-6 shadow-lg shadow-amber-500/25">
            <Icon name="ph:book-open-text-bold" class="size-7 text-white" />
          </div>
          <h3 class="text-2xl font-bold text-zinc-900 dark:text-white mb-3">SmartVerses</h3>
          <p class="text-zinc-600 dark:text-zinc-300 leading-relaxed mb-6">
            Revolutionary Bible tools powered by AI. Detect verses spoken in sermons, find paraphrased references,
            and display scripture instantly.
          </p>
          <div class="mt-auto space-y-3">
            {[
              { icon: 'ph:microphone-bold', text: 'Live transcription' },
              { icon: 'ph:magnifying-glass-bold', text: 'Smart verse detection' },
              { icon: 'ph:quotes-bold', text: 'Paraphrase matching' },
              { icon: 'ph:play-circle-bold', text: 'Instant Go Live' },
            ].map((item) => (
              <div class="flex items-center gap-3 text-sm">
                <div class="size-8 rounded-lg bg-amber-500/10 flex items-center justify-center">
                  <Icon name={item.icon} class="size-4 text-amber-600 dark:text-amber-400" />
                </div>
                <span class="text-zinc-700 dark:text-white">{item.text}</span>
              </div>
            ))}
          </div>
        </div>
      </div>

      <!-- Stage Assist -->
      <div class="group relative overflow-hidden rounded-3xl bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-950/40 dark:to-indigo-950/30 border border-blue-100 dark:border-blue-500/20 p-8">
        <div class="size-12 rounded-xl bg-gradient-to-br from-blue-500 to-indigo-500 flex items-center justify-center mb-4 shadow-lg shadow-blue-500/25">
          <Icon name="ph:timer-bold" class="size-6 text-white" />
        </div>
        <h3 class="text-xl font-bold text-zinc-900 dark:text-white mb-2">Stage Assist</h3>
        <p class="text-sm text-zinc-600 dark:text-zinc-300 leading-relaxed">
          Countdown timers, schedule automation, and dynamic session management. Keep your events running on time.
        </p>
      </div>

      <!-- ProPresenter Control -->
      <div class="group relative overflow-hidden rounded-3xl bg-gradient-to-br from-violet-50 to-purple-50 dark:from-violet-950/40 dark:to-purple-950/30 border border-violet-100 dark:border-violet-500/20 p-8">
        <div class="size-12 rounded-xl bg-gradient-to-br from-violet-500 to-purple-500 flex items-center justify-center mb-4 shadow-lg shadow-violet-500/25">
          <Icon name="ph:desktop-tower-bold" class="size-6 text-white" />
        </div>
        <h3 class="text-xl font-bold text-zinc-900 dark:text-white mb-2">ProPresenter Control</h3>
        <p class="text-sm text-zinc-600 dark:text-zinc-300 leading-relaxed">
          Multi-instance connections, per-slide activation, stage layouts, and custom click patterns. Total control.
        </p>
      </div>

      <!-- Templates - Wide & Interactive (Now Light) -->
      <div class="md:col-span-2 lg:col-span-2 group relative overflow-hidden rounded-3xl bg-gradient-to-br from-slate-50 to-zinc-100 dark:from-zinc-900 dark:to-zinc-900/80 border border-zinc-200 dark:border-white/10 p-8" id="templates-card">
        <div class="flex flex-col md:flex-row md:items-start gap-6">
          <div class="flex-1">
            <div class="size-12 rounded-xl bg-gradient-to-br from-zinc-700 to-zinc-900 flex items-center justify-center mb-4 shadow-lg shadow-zinc-500/25">
              <Icon name="ph:stack-bold" class="size-6 text-white" />
            </div>
            <h3 class="text-xl font-bold text-zinc-900 dark:text-white mb-2">Flexible Templates</h3>
            <p class="text-zinc-600 dark:text-zinc-300 text-sm leading-relaxed mb-4" id="template-description">
              Split content by character count, word count, or line breaks. Perfect for simple text processing without complex rules.
            </p>
            <!-- Code Preview -->
            <div class="bg-zinc-900 rounded-xl p-4 font-mono text-sm overflow-hidden">
              <div class="flex items-center gap-2 mb-3 pb-3 border-b border-zinc-700">
                <span class="size-3 rounded-full bg-red-500"></span>
                <span class="size-3 rounded-full bg-yellow-500"></span>
                <span class="size-3 rounded-full bg-green-500"></span>
                <span class="text-zinc-500 text-xs ml-2">template.config</span>
              </div>
              <pre class="text-zinc-300 transition-all duration-300" id="template-code"><span class="text-blue-400">mode:</span> <span class="text-emerald-400">"simple"</span>
<span class="text-blue-400">split_by:</span> <span class="text-emerald-400">"lines"</span>
<span class="text-blue-400">max_chars:</span> <span class="text-amber-400">80</span></pre>
            </div>
          </div>
          <div class="flex flex-wrap md:flex-col gap-2" id="template-modes">
            <button
              data-mode="simple"
              class="template-mode px-4 py-2.5 rounded-xl text-sm font-medium transition-all duration-200 bg-zinc-900 text-white shadow-lg cursor-pointer hover:scale-105"
            >
              Simple
            </button>
            <button
              data-mode="regex"
              class="template-mode px-4 py-2.5 rounded-xl text-sm font-medium transition-all duration-200 bg-white dark:bg-white/5 border border-zinc-200 dark:border-white/10 text-zinc-700 dark:text-white cursor-pointer hover:scale-105 hover:border-zinc-300 dark:hover:border-white/20"
            >
              Regex
            </button>
            <button
              data-mode="javascript"
              class="template-mode px-4 py-2.5 rounded-xl text-sm font-medium transition-all duration-200 bg-white dark:bg-white/5 border border-zinc-200 dark:border-white/10 text-zinc-700 dark:text-white cursor-pointer hover:scale-105 hover:border-zinc-300 dark:hover:border-white/20"
            >
              JavaScript
            </button>
            <button
              data-mode="ai"
              class="template-mode px-4 py-2.5 rounded-xl text-sm font-medium transition-all duration-200 bg-gradient-to-r from-blue-500 to-violet-500 text-white cursor-pointer hover:scale-105"
            >
              AI ✨
            </button>
          </div>
        </div>
      </div>

      <!-- Recording -->
      <div class="group relative overflow-hidden rounded-3xl bg-gradient-to-br from-rose-50 to-pink-50 dark:from-rose-950/40 dark:to-pink-950/30 border border-rose-100 dark:border-rose-500/20 p-8">
        <div class="size-12 rounded-xl bg-gradient-to-br from-rose-500 to-pink-500 flex items-center justify-center mb-4 shadow-lg shadow-rose-500/25">
          <Icon name="ph:video-camera-bold" class="size-6 text-white" />
        </div>
        <h3 class="text-xl font-bold text-zinc-900 dark:text-white mb-2">Recording Studio</h3>
        <p class="text-sm text-zinc-600 dark:text-zinc-300 leading-relaxed">
          Professional video & audio capture. MP4, WebM, WAV, MP3 with real-time monitoring.
        </p>
      </div>

    </div>

    <!-- Bottom Features Strip -->
    <div class="mt-8 flex flex-wrap justify-center gap-4">
      {[
        { icon: 'ph:microphone-stage-bold', label: 'Live Testimonies' },
        { icon: 'ph:download-simple-bold', label: 'Multiple Imports' },
        { icon: 'ph:paint-brush-bold', label: 'Modern UI' },
        { icon: 'ph:keyboard-bold', label: 'Keyboard Shortcuts' },
        { icon: 'ph:moon-bold', label: 'Dark & Light Themes' },
      ].map((item) => (
        <div class="inline-flex items-center gap-2 px-4 py-2 rounded-full bg-zinc-100 dark:bg-white/5 text-zinc-700 dark:text-white text-sm font-medium hover:bg-zinc-200 dark:hover:bg-white/10 transition-colors">
          <Icon name={item.icon} class="size-4" />
          {item.label}
        </div>
      ))}
    </div>
  </div>
</section>

<script>
  // Template Mode Interactivity
  const templateModes = document.querySelectorAll('.template-mode');
  const templateDescription = document.getElementById('template-description');
  const templateCode = document.getElementById('template-code');

  const templateData: Record<string, { description: string; code: string }> = {
    simple: {
      description: 'Split content by character count, word count, or line breaks. Perfect for simple text processing without complex rules.',
      code: `<span class="text-blue-400">mode:</span> <span class="text-emerald-400">"simple"</span>
<span class="text-blue-400">split_by:</span> <span class="text-emerald-400">"lines"</span>
<span class="text-blue-400">max_chars:</span> <span class="text-amber-400">80</span>`
    },
    regex: {
      description: 'Use regular expressions to match and split content. Great for structured data like verses, timestamps, or formatted text.',
      code: `<span class="text-blue-400">mode:</span> <span class="text-emerald-400">"regex"</span>
<span class="text-blue-400">pattern:</span> <span class="text-emerald-400">/^\\d+\\./gm</span>
<span class="text-blue-400">capture:</span> <span class="text-amber-400">true</span>`
    },
    javascript: {
      description: 'Write custom JavaScript functions for complete control. Transform, filter, and process content with full programming power.',
      code: `<span class="text-blue-400">mode:</span> <span class="text-emerald-400">"javascript"</span>
<span class="text-fuchsia-400">function</span> <span class="text-amber-400">process</span>(text) {
  <span class="text-fuchsia-400">return</span> text.<span class="text-amber-400">split</span>(<span class="text-emerald-400">'\\n'</span>);
}`
    },
    ai: {
      description: 'Let AI intelligently split and format your content. It understands context, handles edge cases, and produces perfectly formatted slides.',
      code: `<span class="text-blue-400">mode:</span> <span class="text-emerald-400">"ai"</span>
<span class="text-blue-400">provider:</span> <span class="text-emerald-400">"openai"</span>
<span class="text-blue-400">prompt:</span> <span class="text-emerald-400">"Split into slides"</span>
<span class="text-zinc-500">// ✨ AI handles the rest</span>`
    }
  };

  templateModes.forEach(btn => {
    btn.addEventListener('click', () => {
      const mode = btn.getAttribute('data-mode');
      if (!mode || !templateDescription || !templateCode) return;

      // Update active state
      templateModes.forEach(b => {
        const m = b.getAttribute('data-mode');
        if (m === mode) {
          if (m === 'ai') {
            b.className = 'template-mode px-4 py-2.5 rounded-xl text-sm font-medium transition-all duration-200 bg-gradient-to-r from-blue-500 to-violet-500 text-white cursor-pointer hover:scale-105 shadow-lg';
          } else {
            b.className = 'template-mode px-4 py-2.5 rounded-xl text-sm font-medium transition-all duration-200 bg-zinc-900 text-white shadow-lg cursor-pointer hover:scale-105';
          }
        } else {
          if (m === 'ai') {
            b.className = 'template-mode px-4 py-2.5 rounded-xl text-sm font-medium transition-all duration-200 bg-gradient-to-r from-blue-500/20 to-violet-500/20 border border-violet-200 text-violet-700 cursor-pointer hover:scale-105' + (document.documentElement.classList.contains('dark') ? ' !border-violet-500/30 !text-violet-300' : '');
          } else {
            b.className = 'template-mode px-4 py-2.5 rounded-xl text-sm font-medium transition-all duration-200 border cursor-pointer hover:scale-105' + (document.documentElement.classList.contains('dark') ? ' bg-white/5 border-white/10 text-white hover:border-white/20' : ' bg-white border-zinc-200 text-zinc-700 hover:border-zinc-300');
          }
        }
      });

      // Update content with animation
      templateDescription.style.opacity = '0';
      templateCode.style.opacity = '0';

      setTimeout(() => {
        templateDescription.textContent = templateData[mode].description;
        templateCode.innerHTML = templateData[mode].code;
        templateDescription.style.opacity = '1';
        templateCode.style.opacity = '1';
      }, 150);
    });
  });

  // Collaboration Tags Interactivity
  const collabTags = document.querySelectorAll('.collab-tag');
  const collabDescription = document.getElementById('collab-description');

  const collabData: Record<string, string> = {
    'live-slides': 'WebSocket-powered Live Slides let your team edit from any browser. Share URLs, sync across devices, and see changes instantly. Perfect for remote teams and distributed workflows.',
    'network-sync': 'Synchronize playlists and schedules across multiple ProAssist instances. Master/Slave/Peer modes ensure everyone stays perfectly in sync during live events.',
    'remote-access': 'Access timer controls and presentation settings remotely via shareable links. Perfect for stage managers and production teams working from different locations.'
  };

  collabTags.forEach(btn => {
    btn.addEventListener('click', () => {
      const collab = btn.getAttribute('data-collab');
      if (!collab || !collabDescription) return;

      // Update active state
      collabTags.forEach(b => {
        const c = b.getAttribute('data-collab');
        if (c === collab) {
          b.className = 'collab-tag px-4 py-2 rounded-full border-2 border-emerald-500 bg-emerald-500 text-white text-sm font-medium whitespace-nowrap transition-all duration-200 hover:scale-105 cursor-pointer';
        } else {
          b.className = 'collab-tag px-4 py-2 rounded-full border-2 border-emerald-200 bg-emerald-500/10 text-sm font-medium whitespace-nowrap transition-all duration-200 hover:scale-105 cursor-pointer' + (document.documentElement.classList.contains('dark') ? ' text-emerald-300 border-emerald-500/30' : ' text-emerald-700');
        }
      });

      // Update content with animation
      collabDescription.style.opacity = '0';

      setTimeout(() => {
        collabDescription.textContent = collabData[collab];
        collabDescription.style.opacity = '1';
      }, 150);
    });
  });
</script>
